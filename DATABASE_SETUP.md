# üóÑÔ∏è –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö PostgreSQL

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ PostgreSQL](#1-—É—Å—Ç–∞–Ω–æ–≤–∫–∞-postgresql)
2. [–ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏](#2-–ø—Ä–æ–≤–µ—Ä–∫–∞-—É—Å—Ç–∞–Ω–æ–≤–∫–∏)
3. [–°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](#3-—Å–æ–∑–¥–∞–Ω–∏–µ-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö)
4. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è](#4-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è-–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
5. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env —Ñ–∞–π–ª–∞](#5-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-env-—Ñ–∞–π–ª–∞)
6. [–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è](#6-–ø—Ä–æ–≤–µ—Ä–∫–∞-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è)
7. [–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º](#7-—Ä–µ—à–µ–Ω–∏–µ-–ø—Ä–æ–±–ª–µ–º)

---

## 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PostgreSQL

### –®–∞–≥ 1.1: –°–∫–∞—á–∏–≤–∞–Ω–∏–µ PostgreSQL

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç:
   ```
   https://www.postgresql.org/download/windows/
   ```

2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É **"Download the installer"**

3. –í—ã–±–µ—Ä–∏—Ç–µ –≤–µ—Ä—Å–∏—é PostgreSQL (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è **14 –∏–ª–∏ –≤—ã—à–µ**)

4. –°–∫–∞—á–∞–π—Ç–µ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ –¥–ª—è Windows (64-bit)

### –®–∞–≥ 1.2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PostgreSQL

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `postgresql-14.x-windows-x64.exe`)

2. **–ú–∞—Å—Ç–µ—Ä —É—Å—Ç–∞–Ω–æ–≤–∫–∏:**
   - –ù–∞–∂–º–∏—Ç–µ **"Next"** –Ω–∞ —ç–∫—Ä–∞–Ω–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è
   - –í—ã–±–µ—Ä–∏—Ç–µ **"Installation Directory"** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `C:\Program Files\PostgreSQL\14`)
   - –ù–∞–∂–º–∏—Ç–µ **"Next"**

3. **–í—ã–±–æ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:**
   - ‚úÖ PostgreSQL Server (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
   - ‚úÖ pgAdmin 4 (–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å - —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
   - ‚úÖ Stack Builder (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   - ‚úÖ Command Line Tools (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
   - –ù–∞–∂–º–∏—Ç–µ **"Next"**

4. **–í—ã–±–æ—Ä –ø–∞–ø–∫–∏ –¥–∞–Ω–Ω—ã—Ö:**
   - –û—Å—Ç–∞–≤—å—Ç–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `C:\Program Files\PostgreSQL\14\data`
   - –ù–∞–∂–º–∏—Ç–µ **"Next"**

5. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–æ–ª—è:**
   - ‚ö†Ô∏è **–í–ê–ñ–ù–û:** –ó–∞–ø–æ–º–Ω–∏—Ç–µ —ç—Ç–æ—Ç –ø–∞—Ä–æ–ª—å!
   - –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `postgres` (—Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
   - –ü—Ä–∏–º–µ—Ä: `postgres123` (–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≤–æ–π –Ω–∞–¥–µ–∂–Ω—ã–π –ø–∞—Ä–æ–ª—å)
   - –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å
   - –ù–∞–∂–º–∏—Ç–µ **"Next"**

6. **–ü–æ—Ä—Ç:**
   - –û—Å—Ç–∞–≤—å—Ç–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: **5432**
   - –ù–∞–∂–º–∏—Ç–µ **"Next"**

7. **–õ–æ–∫–∞–ª—å:**
   - –û—Å—Ç–∞–≤—å—Ç–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: **Russian, Russia**
   - –ù–∞–∂–º–∏—Ç–µ **"Next"**

8. **–ì–æ—Ç–æ–≤–æ –∫ —É—Å—Ç–∞–Ω–æ–≤–∫–µ:**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
   - –ù–∞–∂–º–∏—Ç–µ **"Next"** –¥–ª—è –Ω–∞—á–∞–ª–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

9. **–û–∂–∏–¥–∞–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:**
   - –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (5-10 –º–∏–Ω—É—Ç)
   - –ù–∞–∂–º–∏—Ç–µ **"Finish"**

10. **Stack Builder (–µ—Å–ª–∏ –≤—ã–±—Ä–∞–ª–∏):**
    - –ú–æ–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å, –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è –±–∞–∑–æ–≤–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –®–∞–≥ 1.3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

1. –û—Ç–∫—Ä–æ–π—Ç–µ **pgAdmin 4** –∏–∑ –º–µ–Ω—é –ü—É—Å–∫
2. –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –≤–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å, –∫–æ—Ç–æ—Ä—ã–π –≤—ã —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏
3. –ï—Å–ª–∏ pgAdmin –æ—Ç–∫—Ä—ã–ª—Å—è ‚Äî PostgreSQL —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ!

---

## 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É

1. –û—Ç–∫—Ä–æ–π—Ç–µ **PowerShell** –∏–ª–∏ **CMD**

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏—é PostgreSQL:
   ```bash
   psql --version
   ```
   
   –î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏ —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ:
   ```
   psql (PostgreSQL) 14.9
   ```

3. –ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞:
   - PostgreSQL –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤ PATH
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–ª–Ω—ã–π –ø—É—Ç—å: `"C:\Program Files\PostgreSQL\14\bin\psql.exe" --version`

### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ pgAdmin

1. –û—Ç–∫—Ä–æ–π—Ç–µ **pgAdmin 4**
2. –í –ª–µ–≤–æ–π –ø–∞–Ω–µ–ª–∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
3. –†–∞—Å–∫—Ä–æ–π—Ç–µ —Å–µ—Ä–≤–µ—Ä ‚Üí Databases
4. –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö `postgres` ‚Äî –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç!

### –°–ø–æ—Å–æ–± 3: –ß–µ—Ä–µ–∑ —Å–ª—É–∂–±—ã Windows

1. –ù–∞–∂–º–∏—Ç–µ `Win + R`
2. –í–≤–µ–¥–∏—Ç–µ `services.msc` –∏ –Ω–∞–∂–º–∏—Ç–µ Enter
3. –ù–∞–π–¥–∏—Ç–µ —Å–ª—É–∂–±—É **"postgresql-x64-14"** (–∏–ª–∏ –ø–æ—Ö–æ–∂—É—é)
4. –°—Ç–∞—Ç—É—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **"–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è"**

---

## 3. –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ pgAdmin (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö)

1. **–û—Ç–∫—Ä–æ–π—Ç–µ pgAdmin 4**

2. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É:**
   - –í –ª–µ–≤–æ–π –ø–∞–Ω–µ–ª–∏ –Ω–∞–π–¥–∏—Ç–µ **"Servers"**
   - –†–∞—Å–∫—Ä–æ–π—Ç–µ —Å–µ—Ä–≤–µ—Ä (–æ–±—ã—á–Ω–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è "PostgreSQL 14")
   - –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å, –µ—Å–ª–∏ –ø–æ–ø—Ä–æ—Å–∏—Ç

3. **–°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:**
   - –ü—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π –º—ã—à–∏ –Ω–∞ **"Databases"**
   - –í—ã–±–µ—Ä–∏—Ç–µ **"Create"** ‚Üí **"Database..."**

4. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:**
   - **General** –≤–∫–ª–∞–¥–∫–∞:
     - **Database:** `marina_crm`
     - **Owner:** `postgres` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
     - **Comment:** `CRM —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —è—Ö—Ç-–∫–ª—É–±–∞–º–∏`
   
   - **Definition** –≤–∫–ª–∞–¥–∫–∞:
     - **Encoding:** `UTF8` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
     - **Template:** `template0` (–º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
   
   - –ù–∞–∂–º–∏—Ç–µ **"Save"**

5. **–ü—Ä–æ–≤–µ—Ä–∫–∞:**
   - –í –ª–µ–≤–æ–π –ø–∞–Ω–µ–ª–∏ –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö `marina_crm`
   - –†–∞—Å–∫—Ä–æ–π—Ç–µ –µ—ë ‚Äî –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–∞–ø–∫–∏: Schemas, Tables –∏ —Ç.–¥.

### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É (–¥–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö)

1. **–û—Ç–∫—Ä–æ–π—Ç–µ PowerShell –∏–ª–∏ CMD**

2. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ PostgreSQL:**
   ```bash
   psql -U postgres
   ```
   
   –ò–ª–∏ —Å –ø–æ–ª–Ω—ã–º –ø—É—Ç–µ–º:
   ```bash
   "C:\Program Files\PostgreSQL\14\bin\psql.exe" -U postgres
   ```

3. **–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å** (–∫–æ—Ç–æ—Ä—ã–π –≤—ã —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ)

4. **–°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:**
   ```sql
   CREATE DATABASE marina_crm;
   ```

5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–∑–¥–∞–Ω–∏–µ:**
   ```sql
   \l
   ```
   
   –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤ —Å–ø–∏—Å–∫–µ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö `marina_crm`

6. **–í—ã–π–¥–∏—Ç–µ –∏–∑ psql:**
   ```sql
   \q
   ```

### –°–ø–æ—Å–æ–± 3: –ß–µ—Ä–µ–∑ SQL —Å–∫—Ä–∏–ø—Ç

1. **–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª** `create_database.sql`:
   ```sql
   -- –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è Marina CRM
   CREATE DATABASE marina_crm
       WITH 
       OWNER = postgres
       ENCODING = 'UTF8'
       LC_COLLATE = 'Russian_Russia.1251'
       LC_CTYPE = 'Russian_Russia.1251'
       TABLESPACE = pg_default
       CONNECTION LIMIT = -1;
   
   COMMENT ON DATABASE marina_crm IS 'CRM —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —è—Ö—Ç-–∫–ª—É–±–∞–º–∏';
   ```

2. **–í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç:**
   ```bash
   psql -U postgres -f create_database.sql
   ```

---

## 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

> ‚ö†Ô∏è –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `postgres`, –Ω–æ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ pgAdmin:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ pgAdmin**

2. **–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
   - –ü—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π –Ω–∞ **"Login/Group Roles"**
   - –í—ã–±–µ—Ä–∏—Ç–µ **"Create"** ‚Üí **"Login/Group Role..."**

3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞:**
   - **General** –≤–∫–ª–∞–¥–∫–∞:
     - **Name:** `marina_user`
     - ‚úÖ **Can login?**
   
   - **Definition** –≤–∫–ª–∞–¥–∫–∞:
     - **Password:** `your_secure_password`
     - **Password expiration:** –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º
   
   - **Privileges** –≤–∫–ª–∞–¥–∫–∞:
     - ‚úÖ **Can login?**
     - ‚úÖ **Create databases?** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   
   - –ù–∞–∂–º–∏—Ç–µ **"Save"**

4. **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∞–≤ –Ω–∞ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:**
   - –ü—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π –Ω–∞ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö `marina_crm`
   - **Properties** ‚Üí **Security** –≤–∫–ª–∞–¥–∫–∞
   - **Add** ‚Üí –í—ã–±–µ—Ä–∏—Ç–µ `marina_user`
   - –î–∞–π—Ç–µ –ø—Ä–∞–≤–∞: **ALL** –∏–ª–∏ **CONNECT, CREATE, TEMPORARY**

### –°–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ä–µ–∑ SQL:

```sql
-- –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
CREATE USER marina_user WITH PASSWORD 'your_secure_password';

-- –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∞–≤ –Ω–∞ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
GRANT ALL PRIVILEGES ON DATABASE marina_crm TO marina_user;

-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
\c marina_crm

-- –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∞–≤ –Ω–∞ —Å—Ö–µ–º—É
GRANT ALL ON SCHEMA public TO marina_user;
```

---

## 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env —Ñ–∞–π–ª–∞

### –®–∞–≥ 5.1: –°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞

1. **–í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞** —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env`

2. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ** –∏–∑ `.env.example`:
   ```bash
   # –í PowerShell:
   Copy-Item .env.example .env
   
   # –ò–ª–∏ –≤—Ä—É—á–Ω—É—é —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª
   ```

### –®–∞–≥ 5.2: –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

```env
# Server Configuration
PORT=3000
NODE_ENV=development

# Database Configuration
DB_HOST=localhost
DB_PORT=5432
DB_NAME=marina_crm
DB_USER=postgres
DB_PASSWORD=–≤–∞—à_–ø–∞—Ä–æ–ª—å_–æ—Ç_postgres
```

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è:**

```env
# Server Configuration
PORT=3000
NODE_ENV=development

# Database
DB_HOST=localhost
DB_PORT=5432
DB_NAME=marina_crm
DB_USER=postgres
DB_PASSWORD=postgres123

# JWT
JWT_SECRET=my-super-secret-jwt-key-change-in-production-12345
JWT_EXPIRES_IN=7d

# Email Configuration (–º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º –¥–ª—è –Ω–∞—á–∞–ª–∞)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=noreply@marina-crm.com

# Payment Gateway (–º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º –¥–ª—è –Ω–∞—á–∞–ª–∞)
PAYMENT_GATEWAY_API_KEY=
PAYMENT_GATEWAY_SECRET=

# File Upload
UPLOAD_MAX_SIZE=10485760
UPLOAD_PATH=./uploads

# Frontend URL
FRONTEND_URL=http://localhost:5173
```

### ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã:

1. **DB_PASSWORD** ‚Äî —ç—Ç–æ –ø–∞—Ä–æ–ª—å, –∫–æ—Ç–æ—Ä—ã–π –≤—ã —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ PostgreSQL
2. **JWT_SECRET** ‚Äî –ø—Ä–∏–¥—É–º–∞–π—Ç–µ —Å–≤–æ–π —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á (–º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞)
3. **DB_USER** ‚Äî –æ–±—ã—á–Ω–æ `postgres`, –µ—Å–ª–∏ —Å–æ–∑–¥–∞–ª–∏ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Äî —É–∫–∞–∂–∏—Ç–µ –µ–≥–æ –∏–º—è

---

## 6. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–π)

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é:**
   ```bash
   npm run migrate
   ```

2. **–ï—Å–ª–∏ –≤—Å—ë —É—Å–ø–µ—à–Ω–æ:**
   ```
   ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∞
   ‚úÖ –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
   ```

3. **–ï—Å–ª–∏ –æ—à–∏–±–∫–∞:**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ `.env`
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö `marina_crm` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `test-connection.js`:

```javascript
const { Client } = require('pg');
require('dotenv').config();

const client = new Client({
  host: process.env.DB_HOST,
  port: process.env.DB_PORT,
  database: process.env.DB_NAME,
  user: process.env.DB_USER,
  password: process.env.DB_PASSWORD,
});

client.connect()
  .then(() => {
    console.log('‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —É—Å–ø–µ—à–Ω–æ!');
    return client.query('SELECT NOW()');
  })
  .then((result) => {
    console.log('üìÖ –¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –ë–î:', result.rows[0].now);
    client.end();
  })
  .catch((error) => {
    console.error('‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:', error.message);
    process.exit(1);
  });
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ:
```bash
node test-connection.js
```

### –°–ø–æ—Å–æ–± 3: –ß–µ—Ä–µ–∑ pgAdmin

1. **–û—Ç–∫—Ä–æ–π—Ç–µ pgAdmin**
2. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É**
3. **–†–∞—Å–∫—Ä–æ–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö `marina_crm`**
4. –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É ‚Äî –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!

---

## 7. –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞ 1: "password authentication failed"

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å –≤ `.env`

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞—Ä–æ–ª—å –≤ `.env` —Ñ–∞–π–ª–µ
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ pgAdmin —Å —Ç–µ–º –∂–µ –ø–∞—Ä–æ–ª–µ–º
3. –ï—Å–ª–∏ –∑–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å ‚Äî —Å–º. "–°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è" –Ω–∏–∂–µ

### –ü—Ä–æ–±–ª–µ–º–∞ 2: "database does not exist"

**–ü—Ä–∏—á–∏–Ω–∞:** –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö `marina_crm` –Ω–µ —Å–æ–∑–¥–∞–Ω–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (—Å–º. —Ä–∞–∑–¥–µ–ª 3)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–º—è –±–∞–∑—ã –≤ `.env` (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å `marina_crm`)

### –ü—Ä–æ–±–ª–µ–º–∞ 3: "connection refused" –∏–ª–∏ "could not connect"

**–ü—Ä–∏—á–∏–Ω–∞:** PostgreSQL –Ω–µ –∑–∞–ø—É—â–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ **–°–ª—É–∂–±—ã Windows** (`Win + R` ‚Üí `services.msc`)
2. –ù–∞–π–¥–∏—Ç–µ —Å–ª—É–∂–±—É PostgreSQL
3. –ü—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π ‚Üí **"–ó–∞–ø—É—Å—Ç–∏—Ç—å"**

### –ü—Ä–æ–±–ª–µ–º–∞ 4: "psql is not recognized"

**–ü—Ä–∏—á–∏–Ω–∞:** PostgreSQL –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤ PATH

**–†–µ—à–µ–Ω–∏–µ:**
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–ª–Ω—ã–π –ø—É—Ç—å:
   ```bash
   "C:\Program Files\PostgreSQL\14\bin\psql.exe" -U postgres
   ```

2. –ò–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ PATH:
   - `Win + Pause` ‚Üí **"–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–∏—Å—Ç–µ–º—ã"**
   - **"–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—ã"**
   - –í **"Path"** –¥–æ–±–∞–≤—å—Ç–µ: `C:\Program Files\PostgreSQL\14\bin`

### –ü—Ä–æ–±–ª–µ–º–∞ 5: "port 5432 is already in use"

**–ü—Ä–∏—á–∏–Ω–∞:** –ü–æ—Ä—Ç 5432 –∑–∞–Ω—è—Ç –¥—Ä—É–≥–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –Ω–µ –∑–∞–ø—É—â–µ–Ω –ª–∏ –¥—Ä—É–≥–æ–π —ç–∫–∑–µ–º–ø–ª—è—Ä PostgreSQL
2. –ò–ª–∏ –∏–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç –≤ `.env` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `5433`)

### –ü—Ä–æ–±–ª–µ–º–∞ 6: –°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è postgres

–ï—Å–ª–∏ –∑–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å:

1. **–û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–ª—É–∂–±—É PostgreSQL:**
   - –°–ª—É–∂–±—ã Windows ‚Üí –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å

2. **–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª** `pg_hba.conf.backup`:
   - –ù–∞–π–¥–∏—Ç–µ —Ñ–∞–π–ª `pg_hba.conf` (–æ–±—ã—á–Ω–æ –≤ `C:\Program Files\PostgreSQL\14\data\`)
   - –°–¥–µ–ª–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é

3. **–ò–∑–º–µ–Ω–∏—Ç–µ –º–µ—Ç–æ–¥ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ `pg_hba.conf`
   - –ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É:
     ```
     host    all             all             127.0.0.1/32            scram-sha-256
     ```
   - –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞:
     ```
     host    all             all             127.0.0.1/32            trust
     ```

4. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–ª—É–∂–±—É PostgreSQL**

5. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –±–µ–∑ –ø–∞—Ä–æ–ª—è:**
   ```bash
   psql -U postgres
   ```

6. **–ò–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å:**
   ```sql
   ALTER USER postgres WITH PASSWORD '–Ω–æ–≤—ã–π_–ø–∞—Ä–æ–ª—å';
   ```

7. **–í–µ—Ä–Ω–∏—Ç–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π `pg_hba.conf`** –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–ª—É–∂–±—É

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–û—Ç–º–µ—Ç—å—Ç–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –ø—É–Ω–∫—Ç—ã:

- [ ] PostgreSQL —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] PostgreSQL –∑–∞–ø—É—â–µ–Ω (–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ —á–µ—Ä–µ–∑ —Å–ª—É–∂–±—ã)
- [ ] –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö `marina_crm` —Å–æ–∑–¥–∞–Ω–∞
- [ ] –§–∞–π–ª `.env` —Å–æ–∑–¥–∞–Ω –∏ –∑–∞–ø–æ–ª–Ω–µ–Ω
- [ ] –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ë–î –≤ `.env` –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã:
  - [ ] DB_HOST=localhost
  - [ ] DB_PORT=5432
  - [ ] DB_NAME=marina_crm
  - [ ] DB_USER=postgres
  - [ ] DB_PASSWORD=–≤–∞—à_–ø–∞—Ä–æ–ª—å
- [ ] –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ (—á–µ—Ä–µ–∑ pgAdmin –∏–ª–∏ —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç)
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ (`npm run migrate`)

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏
npm run migrate

# 2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
npm run seed

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
npm run dev:server
```

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- **–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è PostgreSQL:** https://www.postgresql.org/docs/
- **pgAdmin –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** https://www.pgadmin.org/docs/
- **TypeORM –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** https://typeorm.io/

---

**–ì–æ—Ç–æ–≤–æ!** –¢–µ–ø–µ—Ä—å –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é. üéâ

