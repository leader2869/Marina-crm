#!/bin/bash

echo "üßπ –û—á–∏—Å—Ç–∫–∞ DNS –∫–µ—à–∞ –Ω–∞ macOS"
echo "=============================="
echo ""
echo "‚ö†Ô∏è  –î–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥—ã –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞"
echo ""

# –û—á–∏—Å—Ç–∫–∞ DNS –∫–µ—à–∞
echo "–í—ã–ø–æ–ª–Ω—è—é –æ—á–∏—Å—Ç–∫—É DNS –∫–µ—à–∞..."
sudo dscacheutil -flushcache

if [ $? -eq 0 ]; then
    echo "‚úÖ DNS –∫–µ—à –æ—á–∏—â–µ–Ω —É—Å–ø–µ—à–Ω–æ"
else
    echo "‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—á–∏—Å—Ç–∫–µ DNS –∫–µ—à–∞"
    exit 1
fi

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ mDNSResponder
echo ""
echo "–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—é mDNSResponder..."
sudo killall -HUP mDNSResponder

if [ $? -eq 0 ]; then
    echo "‚úÖ mDNSResponder –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω —É—Å–ø–µ—à–Ω–æ"
else
    echo "‚ö†Ô∏è  mDNSResponder –Ω–µ –±—ã–ª –∑–∞–ø—É—â–µ–Ω (—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ)"
fi

echo ""
echo "=============================="
echo "‚úÖ –ì–æ—Ç–æ–≤–æ!"
echo ""
echo "üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:"
echo "1. –ü–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä (–Ω–µ –ø—Ä–æ—Å—Ç–æ –≤–∫–ª–∞–¥–∫—É)"
echo "2. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∑–∞–Ω–æ–≤–æ"
echo "3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–∫—Ä—ã—Ç—å https://www.1marina.ru"
echo "4. –ï—Å–ª–∏ –Ω–µ –ø–æ–º–æ–≥–ª–æ, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Ä–µ–∂–∏–º –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ"
echo ""


