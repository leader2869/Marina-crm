# üóÑÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö PostgreSQL - –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

## üìù –ö—Ä–∞—Ç–∫–∞—è –≤–µ—Ä—Å–∏—è (–¥–ª—è –æ–ø—ã—Ç–Ω—ã—Ö)

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ PostgreSQL 14+
2. –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö: `CREATE DATABASE marina_crm;`
3. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏: `npm run migrate`

---

## üìã –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø—É–Ω–∫—Ç–∞–º

### –®–ê–ì 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PostgreSQL

#### 1.1 –°–∫–∞—á–∏–≤–∞–Ω–∏–µ
- –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞: https://www.postgresql.org/download/windows/
- –ù–∞–∂–º–∏—Ç–µ "Download the installer"
- –í—ã–±–µ—Ä–∏—Ç–µ –≤–µ—Ä—Å–∏—é 14 –∏–ª–∏ –≤—ã—à–µ
- –°–∫–∞—á–∞–π—Ç–µ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ –¥–ª—è Windows (64-bit)

#### 1.2 –£—Å—Ç–∞–Ω–æ–≤–∫–∞
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫
2. –ù–∞–∂–∏–º–∞–π—Ç–µ "Next" –Ω–∞ –≤—Å–µ—Ö —ç–∫—Ä–∞–Ω–∞—Ö
3. **–í–ê–ñ–ù–û:** –ó–∞–ø–æ–º–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `postgres`!
4. –ü–æ—Ä—Ç –æ—Å—Ç–∞–≤—å—Ç–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: **5432**
5. –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ (5-10 –º–∏–Ω—É—Ç)

#### 1.3 –ü—Ä–æ–≤–µ—Ä–∫–∞
- –û—Ç–∫—Ä–æ–π—Ç–µ **pgAdmin 4** –∏–∑ –º–µ–Ω—é –ü—É—Å–∫
- –ï—Å–ª–∏ –æ—Ç–∫—Ä—ã–ª—Å—è ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —É—Å–ø–µ—à–Ω–∞!

---

### –®–ê–ì 2: –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

#### –°–ø–æ—Å–æ–± –ê: –ß–µ—Ä–µ–∑ pgAdmin (–ø—Ä–æ—â–µ)

1. –û—Ç–∫—Ä–æ–π—Ç–µ **pgAdmin 4**
2. –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å (–∫–æ—Ç–æ—Ä—ã–π —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ)
3. –í –ª–µ–≤–æ–π –ø–∞–Ω–µ–ª–∏: **Servers** ‚Üí **PostgreSQL 14** ‚Üí **Databases**
4. –ü—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π –Ω–∞ **"Databases"** ‚Üí **Create** ‚Üí **Database...**
5. –í –ø–æ–ª–µ **"Database"** –≤–≤–µ–¥–∏—Ç–µ: `marina_crm`
6. –ù–∞–∂–º–∏—Ç–µ **"Save"**
7. –ì–æ—Ç–æ–≤–æ! –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–Ω–∞ ‚úÖ

#### –°–ø–æ—Å–æ–± –ë: –ß–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É

1. –û—Ç–∫—Ä–æ–π—Ç–µ **PowerShell** –∏–ª–∏ **CMD**
2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ:
   ```bash
   psql -U postgres
   ```
   (–ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–ª–Ω—ã–π –ø—É—Ç—å:
   `"C:\Program Files\PostgreSQL\14\bin\psql.exe" -U postgres`)

3. –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –æ—Ç PostgreSQL
4. –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –∫–æ–º–∞–Ω–¥—É:
   ```sql
   CREATE DATABASE marina_crm;
   ```
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
   ```sql
   \l
   ```
   (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤ —Å–ø–∏—Å–∫–µ `marina_crm`)
6. –í—ã–π–¥–∏—Ç–µ:
   ```sql
   \q
   ```

---

### –®–ê–ì 3: –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ .env

1. –í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env`
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç—É–¥–∞ —Å–ª–µ–¥—É—é—â–∏–π —Ç–µ–∫—Å—Ç:

```env
# Server Configuration
PORT=3000
NODE_ENV=development

# Database Configuration
DB_HOST=localhost
DB_PORT=5432
DB_NAME=marina_crm
DB_USER=postgres
DB_PASSWORD=–í–ê–®_–ü–ê–†–û–õ–¨_–û–¢_POSTGRES
```

3. **–ó–∞–º–µ–Ω–∏—Ç–µ** `–í–ê–®_–ü–ê–†–û–õ–¨_–û–¢_POSTGRES` –Ω–∞ –ø–∞—Ä–æ–ª—å, –∫–æ—Ç–æ—Ä—ã–π –≤—ã —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ PostgreSQL

4. –î–æ–±–∞–≤—å—Ç–µ —Ç–∞–∫–∂–µ:

```env
# JWT
JWT_SECRET=my-super-secret-jwt-key-change-in-production-12345
JWT_EXPIRES_IN=7d

# File Upload
UPLOAD_MAX_SIZE=10485760
UPLOAD_PATH=./uploads

# Frontend URL
FRONTEND_URL=http://localhost:5173
```

**–ü—Ä–∏–º–µ—Ä –≥–æ—Ç–æ–≤–æ–≥–æ .env —Ñ–∞–π–ª–∞:**

```env
PORT=3000
NODE_ENV=development

DB_HOST=localhost
DB_PORT=5432
DB_NAME=marina_crm
DB_USER=postgres
DB_PASSWORD=postgres123

JWT_SECRET=my-super-secret-jwt-key-change-in-production-12345
JWT_EXPIRES_IN=7d

UPLOAD_MAX_SIZE=10485760
UPLOAD_PATH=./uploads

FRONTEND_URL=http://localhost:5173
```

---

### –®–ê–ì 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω:
   - –ù–∞–∂–º–∏—Ç–µ `Win + R`
   - –í–≤–µ–¥–∏—Ç–µ `services.msc`
   - –ù–∞–π–¥–∏—Ç–µ —Å–ª—É–∂–±—É **"postgresql-x64-14"**
   - –°—Ç–∞—Ç—É—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **"–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è"**

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏:
   ```bash
   npm run migrate
   ```

3. –ï—Å–ª–∏ –≤—Å—ë —É—Å–ø–µ—à–Ω–æ, —É–≤–∏–¥–∏—Ç–µ:
   ```
   ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∞
   ‚úÖ –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
   ```

4. –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ ‚Äî —Å–º. —Ä–∞–∑–¥–µ–ª "–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º" –Ω–∏–∂–µ

---

### –®–ê–ì 5: –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```bash
npm run seed
```

–≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç:
- –¢–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –¢–µ—Å—Ç–æ–≤—ã–π —è—Ö—Ç-–∫–ª—É–±
- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ä–∞—Å—Ö–æ–¥–æ–≤

---

## ‚ö†Ô∏è –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: "password authentication failed"

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞—Ä–æ–ª—å –≤ `.env` —Ñ–∞–π–ª–µ
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ pgAdmin —Å —Ç–µ–º –∂–µ –ø–∞—Ä–æ–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: "database does not exist"

**–†–µ—à–µ–Ω–∏–µ:**
- –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (—Å–º. –®–ê–ì 2)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–º—è –≤ `.env` (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å `marina_crm`)

### –ü—Ä–æ–±–ª–µ–º–∞: "could not connect" –∏–ª–∏ "connection refused"

**–†–µ—à–µ–Ω–∏–µ:**
- PostgreSQL –Ω–µ –∑–∞–ø—É—â–µ–Ω
- –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–ª—É–∂–±—É PostgreSQL —á–µ—Ä–µ–∑ `services.msc`

### –ü—Ä–æ–±–ª–µ–º–∞: "psql is not recognized"

**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–ª–Ω—ã–π –ø—É—Ç—å:
  ```bash
  "C:\Program Files\PostgreSQL\14\bin\psql.exe" -U postgres
  ```

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç

–û—Ç–º–µ—Ç—å—Ç–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –ø—É–Ω–∫—Ç—ã:

- [ ] PostgreSQL —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] PostgreSQL –∑–∞–ø—É—â–µ–Ω (–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ —á–µ—Ä–µ–∑ —Å–ª—É–∂–±—ã)
- [ ] –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö `marina_crm` —Å–æ–∑–¥–∞–Ω–∞
- [ ] –§–∞–π–ª `.env` —Å–æ–∑–¥–∞–Ω
- [ ] –í `.env` —É–∫–∞–∑–∞–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
  - [ ] DB_HOST=localhost
  - [ ] DB_PORT=5432
  - [ ] DB_NAME=marina_crm
  - [ ] DB_USER=postgres
  - [ ] DB_PASSWORD=–≤–∞—à_–ø–∞—Ä–æ–ª—å
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ (`npm run migrate`)

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

```bash
# –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
npm run seed

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
npm run dev:server
```

---

**–ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ:** –°–º. —Ñ–∞–π–ª `DATABASE_SETUP.md` –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π.

