# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

## ‚ùå –û—à–∏–±–∫–∞: `password authentication failed for user "postgres"` (–∫–æ–¥ 28P01)

–≠—Ç–∞ –æ—à–∏–±–∫–∞ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø–∞—Ä–æ–ª—å –≤ —Ñ–∞–π–ª–µ `.env` –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –ø–∞—Ä–æ–ª–µ–º –≤ PostgreSQL.

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ –ø–æ —à–∞–≥–∞–º

### –®–ê–ì 1: –§–∞–π–ª .env —Å–æ–∑–¥–∞–Ω

‚úÖ –§–∞–π–ª `.env` —Å–æ–∑–¥–∞–Ω –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞.

### –®–ê–ì 2: –£–∫–∞–∂–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å

1. **–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `.env`** –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞

2. **–ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É:**
   ```env
   DB_PASSWORD=postgres
   ```

3. **–ó–∞–º–µ–Ω–∏—Ç–µ `postgres` –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å –æ—Ç PostgreSQL:**
   ```env
   DB_PASSWORD=–≤–∞—à_—Ä–µ–∞–ª—å–Ω—ã–π_–ø–∞—Ä–æ–ª—å
   ```

   ‚ö†Ô∏è **–í–ê–ñ–ù–û:** –≠—Ç–æ –ø–∞—Ä–æ–ª—å, –∫–æ—Ç–æ—Ä—ã–π –≤—ã —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ PostgreSQL!

### –®–ê–ì 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞—Ä–æ–ª—å

#### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ pgAdmin

1. –û—Ç–∫—Ä–æ–π—Ç–µ **pgAdmin 4**
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É —Å –ø–∞—Ä–æ–ª–µ–º, –∫–æ—Ç–æ—Ä—ã–π –≤—ã —É–∫–∞–∑–∞–ª–∏ –≤ `.env`
3. –ï—Å–ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ ‚Äî –ø–∞—Ä–æ–ª—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π ‚úÖ
4. –ï—Å–ª–∏ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è ‚Äî –ø–∞—Ä–æ–ª—å –Ω–µ–≤–µ—Ä–Ω—ã–π ‚ùå

#### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É

```bash
psql -U postgres
```

–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å. –ï—Å–ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ ‚Äî –ø–∞—Ä–æ–ª—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π.

### –®–ê–ì 4: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω

1. –ù–∞–∂–º–∏—Ç–µ `Win + R`
2. –í–≤–µ–¥–∏—Ç–µ `services.msc` –∏ –Ω–∞–∂–º–∏—Ç–µ Enter
3. –ù–∞–π–¥–∏—Ç–µ —Å–ª—É–∂–±—É **"postgresql-x64-14"** (–∏–ª–∏ –ø–æ—Ö–æ–∂—É—é)
4. –°—Ç–∞—Ç—É—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **"–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è"**
5. –ï—Å–ª–∏ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ ‚Äî –Ω–∞–∂–º–∏—Ç–µ **"–ó–∞–ø—É—Å—Ç–∏—Ç—å"**

### –®–ê–ì 5: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

1. –û—Ç–∫—Ä–æ–π—Ç–µ **pgAdmin 4**
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö `marina_crm` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
4. –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî —Å–æ–∑–¥–∞–π—Ç–µ –µ—ë:
   - –ü—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π –Ω–∞ **"Databases"** ‚Üí **Create** ‚Üí **Database...**
   - –ò–º—è: `marina_crm`
   - –ù–∞–∂–º–∏—Ç–µ **Save**

### –®–ê–ì 6: –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç:

```bash
node test-db-connection.js
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç:
- ‚úÖ –ü–æ–∫–∞–∂–µ—Ç –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- ‚úÖ –ü–æ–ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ü–æ–∫–∞–∂–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ—à–∏–±–∫–µ, –µ—Å–ª–∏ –æ–Ω–∞ –µ—Å—Ç—å

### –®–ê–ì 7: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é —Å–Ω–æ–≤–∞

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è:

```bash
npm run migrate
```

---

## üîë –ï—Å–ª–∏ –∑–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å –æ—Ç PostgreSQL

### –°–ø–æ—Å–æ–± 1: –°–±—Ä–æ—Å —á–µ—Ä–µ–∑ pgAdmin (–µ—Å–ª–∏ –ø–æ–º–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞)

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –¥—Ä—É–≥–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å –ø—Ä–∞–≤–∞–º–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ.

### –°–ø–æ—Å–æ–± 2: –°–±—Ä–æ—Å —á–µ—Ä–µ–∑ —Ñ–∞–π–ª pg_hba.conf

1. **–û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–ª—É–∂–±—É PostgreSQL:**
   - `Win + R` ‚Üí `services.msc`
   - –ù–∞–π–¥–∏—Ç–µ —Å–ª—É–∂–±—É PostgreSQL
   - –ü—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π ‚Üí **"–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å"**

2. **–ù–∞–π–¥–∏—Ç–µ —Ñ–∞–π–ª `pg_hba.conf`:**
   - –û–±—ã—á–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤: `C:\Program Files\PostgreSQL\14\data\pg_hba.conf`
   - –û—Ç–∫—Ä–æ–π—Ç–µ –µ–≥–æ –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ **–æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞**

3. **–°–¥–µ–ª–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é:**
   ```bash
   copy "C:\Program Files\PostgreSQL\14\data\pg_hba.conf" "C:\Program Files\PostgreSQL\14\data\pg_hba.conf.backup"
   ```

4. **–ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É:**
   ```
   host    all             all             127.0.0.1/32            scram-sha-256
   ```

5. **–ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞:**
   ```
   host    all             all             127.0.0.1/32            trust
   ```

6. **–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª**

7. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–ª—É–∂–±—É PostgreSQL**

8. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –±–µ–∑ –ø–∞—Ä–æ–ª—è:**
   ```bash
   psql -U postgres
   ```

9. **–ò–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å:**
   ```sql
   ALTER USER postgres WITH PASSWORD '–Ω–æ–≤—ã–π_–ø–∞—Ä–æ–ª—å';
   ```

10. **–í–µ—Ä–Ω–∏—Ç–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π `pg_hba.conf`** (–∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏)

11. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–ª—É–∂–±—É PostgreSQL**

12. **–û–±–Ω–æ–≤–∏—Ç–µ `.env` —Ñ–∞–π–ª** —Å –Ω–æ–≤—ã–º –ø–∞—Ä–æ–ª–µ–º

---

## üìù –ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ .env —Ñ–∞–π–ª–∞

```env
# Server Configuration
PORT=3000
NODE_ENV=development

# Database Configuration
DB_HOST=localhost
DB_PORT=5432
DB_NAME=marina_crm
DB_USER=postgres
DB_PASSWORD=–º–æ–π_–ø–∞—Ä–æ–ª—å_123  ‚Üê –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à –ø–∞—Ä–æ–ª—å!

# JWT Configuration
JWT_SECRET=my-super-secret-jwt-key-change-in-production-12345
JWT_EXPIRES_IN=7d

# File Upload
UPLOAD_MAX_SIZE=10485760
UPLOAD_PATH=./uploads

# Frontend URL
FRONTEND_URL=http://localhost:5173
```

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç

–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –º–∏–≥—Ä–∞—Ü–∏–∏ —É–±–µ–¥–∏—Ç–µ—Å—å:

- [ ] –§–∞–π–ª `.env` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
- [ ] –í `.env` —É–∫–∞–∑–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π `DB_PASSWORD` (–≤–∞—à –ø–∞—Ä–æ–ª—å –æ—Ç PostgreSQL)
- [ ] PostgreSQL –∑–∞–ø—É—â–µ–Ω (–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ —á–µ—Ä–µ–∑ `services.msc`)
- [ ] –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö `marina_crm` —Å–æ–∑–¥–∞–Ω–∞
- [ ] –¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç `node test-db-connection.js` –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è `.env` —Ñ–∞–π–ª–∞:

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
node test-db-connection.js

# 2. –ï—Å–ª–∏ —É—Å–ø–µ—à–Ω–æ - –∑–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é
npm run migrate

# 3. –ï—Å–ª–∏ —É—Å–ø–µ—à–Ω–æ - –∑–∞–ø–æ–ª–Ω–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
npm run seed
```

---

## üí° –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ psql:

```bash
psql -U postgres -d marina_crm
```

### –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–µ—Å–ª–∏ –Ω–µ —Å–æ–∑–¥–∞–Ω–∞):

```sql
CREATE DATABASE marina_crm;
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ø–∏—Å–∫–∞ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö:

```sql
\l
```

---

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è –≤ `.env` —Ñ–∞–π–ª–µ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–Ω–æ–≤–∞:**
```bash
npm run migrate
```

